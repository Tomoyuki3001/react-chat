{"ast":null,"code":"import _objectSpread from\"C:/Users/mjr01/OneDrive/\\u30C7\\u30B9\\u30AF\\u30C8\\u30C3\\u30D7/Code/react-chat-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/mjr01/OneDrive/\\u30C7\\u30B9\\u30AF\\u30C8\\u30C3\\u30D7/Code/react-chat-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useEffect,useRef,useState}from\"react\";import React from\"react\";import Message from\"./Message\";import{collection,onSnapshot,orderBy,query}from\"firebase/firestore\";import{db}from\"../firebase\";import SendMessage from\"./SendMessage\";import ScrollToBottom from\"react-scroll-to-bottom\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var MessageContext=/*#__PURE__*/createContext();var style={main:\"flex flex-col p-[10px] relative pb-20\"};function Chat(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var scroll=useRef();useEffect(function(){var q=query(collection(db,\"messages\"),orderBy(\"timestamp\"));var unsubscribe=onSnapshot(q,function(querySnapshot){var messages=[];querySnapshot.forEach(function(doc){messages.push(_objectSpread(_objectSpread({},doc.data()),{},{id:doc.id}));});setMessages(messages);});return function(){return unsubscribe();};},[]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(MessageContext.Provider,{value:{messages:messages,setMessages:setMessages},children:[/*#__PURE__*/_jsx(ScrollToBottom,{className:\"message-container\",children:/*#__PURE__*/_jsx(\"main\",{className:style.main,children:messages&&messages.map(function(message){return/*#__PURE__*/_jsx(Message,{message:message},message.id);})})}),/*#__PURE__*/_jsx(SendMessage,{scroll:scroll}),/*#__PURE__*/_jsx(\"span\",{ref:scroll})]})});}export default Chat;","map":{"version":3,"names":["createContext","useEffect","useRef","useState","React","Message","collection","onSnapshot","orderBy","query","db","SendMessage","ScrollToBottom","MessageContext","style","main","Chat","messages","setMessages","scroll","q","unsubscribe","querySnapshot","forEach","doc","push","data","id","map","message"],"sources":["C:/Users/mjr01/OneDrive/デスクトップ/Code/react-chat-app/src/components/Chat.jsx"],"sourcesContent":["import { createContext, useEffect, useRef, useState } from \"react\";\r\nimport React from \"react\";\r\nimport Message from \"./Message\";\r\nimport { collection, onSnapshot, orderBy, query } from \"firebase/firestore\";\r\nimport { db } from \"../firebase\";\r\nimport SendMessage from \"./SendMessage\";\r\nimport ScrollToBottom from \"react-scroll-to-bottom\";\r\nexport const MessageContext = createContext();\r\n\r\nconst style = {\r\n  main: \"flex flex-col p-[10px] relative pb-20\",\r\n};\r\n\r\nfunction Chat() {\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  const scroll = useRef();\r\n\r\n  useEffect(() => {\r\n    const q = query(collection(db, \"messages\"), orderBy(\"timestamp\"));\r\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\r\n      let messages = [];\r\n      querySnapshot.forEach((doc) => {\r\n        messages.push({ ...doc.data(), id: doc.id });\r\n      });\r\n      setMessages(messages);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <MessageContext.Provider value={{ messages, setMessages }}>\r\n        <ScrollToBottom className=\"message-container\">\r\n          <main className={style.main}>\r\n            {messages &&\r\n              messages.map((message) => (\r\n                <Message key={message.id} message={message} />\r\n              ))}\r\n          </main>\r\n        </ScrollToBottom>\r\n        <SendMessage scroll={scroll} />\r\n        <span ref={scroll}></span>\r\n      </MessageContext.Provider>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"],"mappings":"2UAAA,OAASA,aAAa,CAAEC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAClE,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,QAAO,KAAM,WAAW,CAC/B,OAASC,UAAU,CAAEC,UAAU,CAAEC,OAAO,CAAEC,KAAK,KAAQ,oBAAoB,CAC3E,OAASC,EAAE,KAAQ,aAAa,CAChC,MAAOC,YAAW,KAAM,eAAe,CACvC,MAAOC,eAAc,KAAM,wBAAwB,CAAC,6IACpD,MAAO,IAAMC,eAAc,cAAGb,aAAa,EAAE,CAE7C,GAAMc,MAAK,CAAG,CACZC,IAAI,CAAE,uCACR,CAAC,CAED,QAASC,KAAI,EAAG,CACd,cAAgCb,QAAQ,CAAC,EAAE,CAAC,wCAArCc,QAAQ,eAAEC,WAAW,eAE5B,GAAMC,OAAM,CAAGjB,MAAM,EAAE,CAEvBD,SAAS,CAAC,UAAM,CACd,GAAMmB,EAAC,CAAGX,KAAK,CAACH,UAAU,CAACI,EAAE,CAAE,UAAU,CAAC,CAAEF,OAAO,CAAC,WAAW,CAAC,CAAC,CACjE,GAAMa,YAAW,CAAGd,UAAU,CAACa,CAAC,CAAE,SAACE,aAAa,CAAK,CACnD,GAAIL,SAAQ,CAAG,EAAE,CACjBK,aAAa,CAACC,OAAO,CAAC,SAACC,GAAG,CAAK,CAC7BP,QAAQ,CAACQ,IAAI,gCAAMD,GAAG,CAACE,IAAI,EAAE,MAAEC,EAAE,CAAEH,GAAG,CAACG,EAAE,GAAG,CAC9C,CAAC,CAAC,CACFT,WAAW,CAACD,QAAQ,CAAC,CACvB,CAAC,CAAC,CACF,MAAO,kBAAMI,YAAW,EAAE,GAC5B,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,sCACE,MAAC,cAAc,CAAC,QAAQ,EAAC,KAAK,CAAE,CAAEJ,QAAQ,CAARA,QAAQ,CAAEC,WAAW,CAAXA,WAAY,CAAE,wBACxD,KAAC,cAAc,EAAC,SAAS,CAAC,mBAAmB,uBAC3C,aAAM,SAAS,CAAEJ,KAAK,CAACC,IAAK,UACzBE,QAAQ,EACPA,QAAQ,CAACW,GAAG,CAAC,SAACC,OAAO,qBACnB,KAAC,OAAO,EAAkB,OAAO,CAAEA,OAAQ,EAA7BA,OAAO,CAACF,EAAE,CAAsB,EAC/C,CAAC,EACC,EACQ,cACjB,KAAC,WAAW,EAAC,MAAM,CAAER,MAAO,EAAG,cAC/B,aAAM,GAAG,CAAEA,MAAO,EAAQ,GACF,EACzB,CAEP,CAEA,cAAeH,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}